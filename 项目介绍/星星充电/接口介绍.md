## 标准接口：比如查询公共信息，包括：充电运营商信息、充电站信息、充电设备信息、充电设备接口信息、充电站统计信息、充电设备接口统计信息、充电站实时状态、充电设备接口实时状态、设备告警信息。

## 定制接口：标准接口根据不同的市级平台的需求，进行字段更改

## 扩展接口：新增的接口，标准接口范围外

## 接口角色：
- 分为2个类型：接口提供方和接口调用方。
- 接口功能由接口提供方负责实现，提供服务调用入口，接受服务功能请求，返回服务功能执行结果。
- 接口由接口调用方按照数据需求调用，提出服务功能请求，获得服务功能执行结果。


## 使用模式
- 接口使用模式分为2个类型：充电运营商平台主动上报和市级平台查询
- 充电运营商平台根据数据上报需求，主动请求市级平台接口功能，完成信息上报市级平台
- 市级平台根据数据核查和监测需求，主动请求运营商平台接口功能，完成信息收集


## 调用频率
- 接口调用频率分为2种类型：按条件即时触发、定时触发
- 按条件即时触发根据业务功能需要，或者特定关联因素，符合条件的场景下，即时触发接口
  - 调用条件主要2类：用户随时查询时调用/告警产生时自动调用
- 定时触发是根据业务功能需要，定时触发接口调用，一般按照默认系统频率，该参数可以调整

## 接口数据有效性
- 数据一致等

## 接口数据时效性
- 网络正常情况充电订单应在充电结束后2分钟内上传到平台，离线设备要支持订单补传。网络异常情况下产生的订单，待网络恢复后应立即上传。

## 数据同步机制
- 每月月初公交集团会把平台根据对账规则判断出的异常数据通过excel表格形式发给各运营商，运营商在每月1号0点到结算日0点可对存疑的异常数据进行重新推送(支持充电订单信息新增或修改)。每月结算日0点冻结上月数据，不再支持对订单进行修改和删除操作，由于设备离线等情况原因导致订单延迟推送，3号之后仍然可推送上月的数据，会正常计入下月进行处理。

## 接口双方
- 客户充电平台=市级平台=客户归属运营商
- 充电运营商平台=设备归属运营商平台=基础设施运营商=运营服务平台


## 接口加密：
- 采用身份认证（token）、访问控制（IP访问控制、时间访问控制）、数据加密（需要安全可靠并且普遍使用的加密算法/密钥认证）、数字签名（数字证书认证）等安全措施；
- 密钥体系：
  - 每个运营商与市级平台交互前需要分配平台标识（OperatorID）、平台密钥（OperatorSecret）、消息密钥（DataSecret）、消息密钥初始化向量（DataSecretIV）和签名密钥（SigSecret）
- 加密规则：消息发送方需要对Data字段中涉及交易及隐私等数据利用消息密钥（DataSecret）和消息密钥初始化向量（DataSecretIV）进行加密，加密算法宜使用AES128位加密，加密模式采用CBC，填充模式采用PKCS5Padding方式。消息接收方收到消息之后，根据消息密钥（DataSecret）对消息体中的Data数据进行解密，校验参数合法性等后续业务处理。
- 签名规则：参数签名采用HMAC-MD5算法，采用MD5作为散列函数，通过签名密钥（SigSecret）对整个消息主体（OperatorID、加密后的Data、TimeStamp、Seq）进行加密，然后采用Md5信息摘要的方式形成新的密文（字段Sig），参数签名要求大写。参数签名顺序按照消息主体顺序拼接后执行，拼接顺序为运营商标识（OperatorID）、参数内容（加密后的Data）、时间戳（TimeStamp）、自增序列（Seq）
- 最后发送出去的消息主体：运营商标识（OperatorID）、加密后的参数内容（Data）、时间戳（TimeStamp）、自增序列（Seq）和数字签名（Sig）组成





